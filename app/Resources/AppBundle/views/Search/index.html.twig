{% extends "::base.html.twig" %}

{% block breadcrumb %}{% endblock %}

{% block prebody %}

<div class="container js-map">
    <div class="map"></div>
</div>

{% include "AppBundle:Search:_search_form.html.twig" with {'form' : form } %}

{% endblock %}


{% block body %}

<!-- BEGIN PROPERTY LISTING -->
<br />
    <div class="row">
        <h2 class="section-title animate-from-bottom animation-from-bottom" data-animation-direction="from-bottom" data-animation-delay="50">Les derniers espaces disponibles</h2>

        {% for space in latest %}
            <div class="item col-sm-4"><!-- Set width to 4 columns for grid view mode only -->
                <div class="image">
                    <a href="{{ path('space_show', {'id' : space.id}) }}">
                        <h3>{{ space.name }}</h3>
                        <span class="location">Upper East Side, New York</span>
                    </a>
                    <img src="{{ vich_uploader_asset(space.pics.0, 'file') | imagine_filter('square')  }}" alt="" />
                </div>
                <div class="price">
                    <i class="fa fa-home"></i>For Sale
                    <span>{{ space.price }} €</span>
                </div>
                <ul class="amenities">
                    <li><i class="icon-area"></i> 2150 Sq Ft</li>
                    <li><i class="icon-bedrooms"></i> 4</li>
                    <li><i class="icon-bathrooms"></i> 3</li>
                </ul>
            </div>
        {% endfor %}

    </div>

{% include '@App/Default/_partners.html.twig' %}

{% endblock %}

{% block javascript %}
    {{ parent() }}

    {% javascripts
        'bundles/app/js/raphael.js'
        'bundles/app/js/jquery.mapael.js'
        'bundles/app/js/map.js'
    %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script type="text/javascript">
        $(document).ready(function() {
            $(".js-map").mapael({
                map : {
                    name : "idf"

                    , zoom : {
                        enabled : true,
                        maxLevel : 10
                    }

                    // Set default plots and areas style
                    , defaultPlot : {
                        attrs : {
                            fill: "#004a9b"
                            , opacity : 0.6
                        }
                        , attrsHover : {
                            opacity : 1
                        }
                        , text : {
                            attrs : {
                                fill : "#505444"
                            }
                            , attrsHover : {
                                fill : "#000"
                            }
                        }
                    }
                    , defaultArea: {
                        attrs : {
                            fill : "#f4f4e8"
                            , stroke: "#ced8d0"
                        }
                        , attrsHover : {
                            fill: "#a4e100"
                        }
                        , text : {
                            attrs : {
                                fill : "#505444"
                            }
                            , attrsHover : {
                                fill : "#000"
                            }
                        }
                    }
                },

                // Customize some areas of the map
                areas: {
                    "path6" : {
                        text : {content : "Morbihan", attrs : {"font-size" : 10}},
                        tooltip: {content : "<b>Morbihan</b> <br /> Bretagne"}
                    },
                    "Essone" : {
                        attrs : {
                            fill : "#488402"
                        }
                        , attrsHover : {
                            fill: "#a4e100"
                        }
                    },
                    "relief6" : {
                        attrs : {
                            fill : "red"
                        }
                        , attrsHover : {
                            fill: "#a4e100"
                        }
                    },
                    "relief7" : {
                        attrs : {
                            fill : "blue"
                        }
                        , attrsHover : {
                            fill: "#a4e100"
                        }
                    }
                },

                // Add some plots on the map
                plots : {
                    // Image plot
                    'paris' : {
                        type : "image",
                        url: "http://www.vincentbroute.fr/mapael/marker.png",
                        width: 12,
                        height: 40,
                        latitude : 48.86,
                        longitude: 2.3444,
                        attrs : {
                            opacity : 1
                        },
                        attrsHover: {
                            transform : "s1.5"
                        }
                    },
                    // Circle plot
                    'lyon' : {
                        type: "circle",
                        size:50,
                        latitude :45.758888888889,
                        longitude: 4.8413888888889,
                        tooltip: {content : "<span style=\"font-weight:bold;\">City :</span> Lyon <br /> RhÃ´ne-Alpes"},
                        text : {content : "Lyon"}
                    },
                    // Square plot
                    'rennes' : {
                        type :"square",
                        size :20,
                        latitude : 48.114166666667,
                        longitude: -1.6808333333333,
                        tooltip: {content : "<span style=\"font-weight:bold;\">City :</span> Rennes <br /> Bretagne"},
                        text : {content : "Rennes"}
                    },
                    // Plot positioned by x and y instead of latitude, longitude
                    'myplot' : {
                        x : 300,
                        y: 200,
                        text : {
                            content : "My plot"
                            , position: "bottom"
                            , attrs : {"font-size" : 10, fill : "#004a9b", opacity: 0.6}
                            , attrsHover : {fill : "#004a9b", opacity: 1}
                        },
                    },
                    'Bordeaux' : {
                        type: "circle",
                        size:30,
                        x : 300,
                        y: 200,
                        attrs : {
                            opacity : 1
                        },
                        text : {
                            content : "33",
                            position : "inner",
                            attrs : {
                                "font-size" : 16
                                , "font-weight" : "bold"
                                , fill : "#fff"
                            },
                            attrsHover : {
                                "font-size" : 16
                                , "font-weight" : "bold"
                                , fill : "#fff"
                            }
                        }
                    }
                }
            });
        });
    </script>


{% endblock %}